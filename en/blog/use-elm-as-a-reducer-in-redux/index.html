<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Use Elm as a Reducer in Redux | Tech articles | Igor Kuzmenko</title><meta name="robots" content="index,follow"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:creator" content="@kuzzmi"/><meta property="og:title" content="Use Elm as a Reducer in Redux"/><meta property="og:description" content="Want to use Elm in your project, but a bit hesitant going cold turkey? In this blog post I&#x27;ll try to show how you can use the best from both worlds bulletproof Elm logic and ridiculously rich React components library.
"/><meta property="og:url" content="https://kuzzmi.com/en/blog/use-elm-as-a-reducer-in-redux/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2018-07-28 22:53:59 +0200"/><meta property="article:author" content="https://kuzzmi.com/about"/><meta property="article:tag" content="technology"/><meta property="article:tag" content="react"/><meta property="article:tag" content="redux"/><meta property="article:tag" content="web development"/><meta property="article:tag" content="javascript"/><meta property="article:tag" content="elm"/><link rel="canonical" href="https://kuzzmi.com/en/blog/use-elm-as-a-reducer-in-redux/"/><meta name="next-head-count" content="19"/><link rel="dns-prefetch" href="https://www.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="180x180" href="/static/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicon-16x16.png"/><link rel="manifest" href="/static/site.webmanifest"/><link rel="shortcut icon" href="/static/favicon.ico" type="image/x-icon"/><meta name="apple-mobile-web-app-capable" content="yes"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/styles/base16/railscasts.min.css"/><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/highlight.min.js"></script><meta name="author" content="Igor Kuzmenko"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="/_next/static/css/8d3077ef275150e2.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8d3077ef275150e2.css" data-n-g=""/><link rel="preload" href="/_next/static/css/5efee9f793991289.css" as="style"/><link rel="stylesheet" href="/_next/static/css/5efee9f793991289.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-fc97f3f1282ce3ed.js" defer=""></script><script src="/_next/static/chunks/main-fca90e9fb8aa5e83.js" defer=""></script><script src="/_next/static/chunks/pages/_app-84072d5e9d49e694.js" defer=""></script><script src="/_next/static/chunks/47-1461360545d2f08c.js" defer=""></script><script src="/_next/static/chunks/962-41b19898a46b0b4f.js" defer=""></script><script src="/_next/static/chunks/pages/%5Blocale%5D/blog/%5Bslug%5D-2f15bd0a4df51c76.js" defer=""></script><script src="/_next/static/pHsXiBIdWUiOfxF4_IgSp/_buildManifest.js" defer=""></script><script src="/_next/static/pHsXiBIdWUiOfxF4_IgSp/_ssgManifest.js" defer=""></script><script src="/_next/static/pHsXiBIdWUiOfxF4_IgSp/_middlewareManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=JetBrains+Mono&family=PT+Sans:ital,wght@0,400;0,700;1,400&display=swap">@font-face{font-family:'JetBrains Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/jetbrainsmono/v11/tDbY2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8yKxjPg.woff) format('woff')}@font-face{font-family:'PT Sans';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v16/jizYRExUiTo99u79D0eEww.woff) format('woff')}@font-face{font-family:'PT Sans';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v16/jizaRExUiTo99u79P0Y.woff) format('woff')}@font-face{font-family:'PT Sans';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v16/jizfRExUiTo99u79B_mh4Oo.woff) format('woff')}@font-face{font-family:'JetBrains Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/jetbrainsmono/v11/tDbY2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8yKxTN1OTk6OThhvAWV8.woff) format('woff');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'JetBrains Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/jetbrainsmono/v11/tDbY2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8yKxTPlOTk6OThhvAWV8.woff) format('woff');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'JetBrains Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/jetbrainsmono/v11/tDbY2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8yKxTOVOTk6OThhvAWV8.woff) format('woff');unicode-range:U+0370-03FF}@font-face{font-family:'JetBrains Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/jetbrainsmono/v11/tDbY2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8yKxTNVOTk6OThhvAWV8.woff) format('woff');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'JetBrains Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/jetbrainsmono/v11/tDbY2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8yKxTNFOTk6OThhvAWV8.woff) format('woff');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'JetBrains Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/jetbrainsmono/v11/tDbY2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8yKxTOlOTk6OThhvA.woff) format('woff');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'PT Sans';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v16/jizYRExUiTo99u79D0e0ysmIAjcQ-woy.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'PT Sans';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v16/jizYRExUiTo99u79D0e0w8mIAjcQ-woy.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'PT Sans';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v16/jizYRExUiTo99u79D0e0ycmIAjcQ-woy.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'PT Sans';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v16/jizYRExUiTo99u79D0e0x8mIAjcQ-w.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'PT Sans';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v16/jizaRExUiTo99u79D0-ExcOPIDUg-g.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'PT Sans';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v16/jizaRExUiTo99u79D0aExcOPIDUg-g.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'PT Sans';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v16/jizaRExUiTo99u79D0yExcOPIDUg-g.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'PT Sans';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v16/jizaRExUiTo99u79D0KExcOPIDU.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'PT Sans';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v16/jizfRExUiTo99u79B_mh0OOtLR8a8zILig.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'PT Sans';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v16/jizfRExUiTo99u79B_mh0OqtLR8a8zILig.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'PT Sans';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v16/jizfRExUiTo99u79B_mh0OCtLR8a8zILig.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'PT Sans';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v16/jizfRExUiTo99u79B_mh0O6tLR8a8zI.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next"><main class="PageLayout_page_container__M8QGN "><menu class="PageLayout_menu_container__La6NU"><ul><li class="PageLayout_inactive__g2bTn"><a href="/en/">Home</a></li><li><a href="/en/blog/">Tech articles</a></li><li class="PageLayout_inactive__g2bTn"><a href="/en/thoughts/">Thoughts</a></li><li class="PageLayout_inactive__g2bTn"><a href="/en/about/">About me</a></li></ul></menu><section class="PageLayout_content_container__1IMZI"><header class="PageLayout_header_container__Y6dbq"><div><div class="PageLayout_menu_button__vWi4y"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24px" height="24px"><path fill="none" stroke="#000000" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M3 12L21 12M3 6L21 6M3 18L21 18"></path></svg></div><p class="PageLayout_name__xhUaP"></p></div><div class="PageLayout_lang_switcher___L3bH"><p class="PageLayout_version__2_iha">version<!-- -->:<!-- --></p><div class="PageLayout_langs__z_SxD"><a class="" href="/ua/blog/use-elm-as-a-reducer-in-redux/">ðŸ‡ºðŸ‡¦</a><a class="PageLayout_active__UxQoO" href="/en/blog/use-elm-as-a-reducer-in-redux/">ðŸ‡¬ðŸ‡§</a></div></div></header><article class="PageLayout_content__6Pdc3"><div class="Post_container__jmeoa"><h1>Use Elm as a Reducer in Redux</h1><p class="Post_date__B7bMG">7/28/2018, 11:53:59 PM</p><div><p>If you've ever used <a href="https://elm-lang.org/">Elm</a>, you might already know that it makes your code free
(<em>almost</em>) of runtime errors, which are quite common in JavaScript
applications.</p>
<p>If you haven't, then go check it out, it's awesome and there is no way back.
Once you felt this taste of functional programming language that's tailored to
fix all issues we've ever had with JavaScript, you won't be able to unsee it.</p>
<h2 id="motivation">Motivation</h2>
<p>After creating a bunch of applications with Elm, you start missing some
incredibly awesome features like pattern matching, strict type checking,
somewhat complete functional programming experience.</p>
<p>Some principles from <a href="https://guide.elm-lang.org/architecture/">The Elm Architecture</a> were taken as a basis for one of
the most popular libraries for JavaScript, an awesome state managing library,
<a href="https://redux.js.org/">Redux</a>. And when you have any Elm experience, you start missing error messages
that you haven't implemented some message in an <code>update</code> function, or that you
forgot to update a handful of functions after some refactoring.</p>
<p>When I started working on a new project a year ago, I made a decision to use
Elm in combination with <a href="https://reactjs.org/">React</a>, <a href="https://facebook.github.io/react-native/">React Native</a> and <a href="https://redux.js.org/">Redux</a>. The main reason
was that React components were easily reused for web and mobile, and Elm
could protect the application from runtime exceptions and from potential
painful refactorings, that are inevitable in every startup.</p>
<p>So the basic idea is that you can write Redux reducer in Elm and use all nifty
libraries and components available for React and React Native.</p>
<p>When I was looking for my options I found a <a href="https://github.com/cureous/redux-elm-middleware">library</a> called
<strong>redux-elm-middleware</strong>. The original repo was abandoned and after some time I
just forked it, fixed a bunch of bugs, added a couple of nice features and a
year later would like to give you a brief intro to how to make your life
awesome.</p>
<h2 id="howitworks">How It Works</h2>
<p>Elm supports basic interoperability with JavaScript using
<a href="https://guide.elm-lang.org/interop/javascript.html">ports</a>. The basic idea behind ports is that you can define
senders and listeners that will create a "bridge" between JS and Elm. These
ports are available through <code>Elm.ports</code> object in JavaScript.</p>
<p>Senders, ports that send data from Elm, have <code>subscribe</code> method in JavaScript,
and listeners, ports that receive data in Elm, have <code>send</code> method in
JavaScript.</p>
<p><strong>redux-elm-middleware</strong> looks for available ports and depending on which port
is triggered, or which Redux action is dispatched, passes it further to other
reducers, or to Elm Reducer, accordingly.</p>
<h2 id="example">Example</h2>
<p>Setting up <strong>redux-elm-middleware</strong> is fairly easy procedure:</p>
<pre class="js language-js"><code class="hljs js language-js"><span class="hljs-comment">// createStore.js</span>
<span class="hljs-comment">// or anywhere where you define your store</span>
<span class="hljs-keyword">import</span> { createStore, applyMiddleware, combineReducers } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;redux&#x27;</span>;

<span class="hljs-keyword">import</span> createElmMiddleware, { reducer <span class="hljs-keyword">as</span> elmReducer } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@cureous/redux-elm-middleware&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Elm</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./elm/Reducer.elm&#x27;</span>;

<span class="hljs-keyword">const</span> elmWorker = <span class="hljs-title class_">Elm</span>.<span class="hljs-property">Reducer</span>.<span class="hljs-title function_">worker</span>();
<span class="hljs-keyword">const</span> { run <span class="hljs-keyword">as</span> runElmWorker, elmMiddleware } = <span class="hljs-title function_">createElmMiddleware</span>(elmWorker);

<span class="hljs-keyword">const</span> reducer = <span class="hljs-title function_">combineReducers</span>({
    <span class="hljs-attr">elm</span>: elmReducer,
});

<span class="hljs-keyword">const</span> store = <span class="hljs-title function_">createStore</span>(
    reducer,
    {},
    <span class="hljs-title function_">applyMiddleware</span>(elmMiddleware),
);

<span class="hljs-title function_">runElmWorker</span>(store);
</code></pre>
<p>Then you need to create <code>./elm/Reducer.elm</code> file with the <code>Redux.program</code> as an
entry point:</p>
<pre class="elm language-elm"><code class="hljs elm language-elm"><span class="hljs-comment">-- ./elm/Reducer.elm</span>
<span class="hljs-keyword">port</span> <span class="hljs-keyword">module</span> Reducer <span class="hljs-keyword">exposing</span> (..)


<span class="hljs-keyword">import</span> Json.Encode <span class="hljs-keyword">as</span> Json
<span class="hljs-keyword">import</span> Redux


<span class="hljs-comment">-- This is a listener port</span>
<span class="hljs-keyword">port</span> increment : ({} -&gt; msg) -&gt; Sub msg


subscriptions : State -&gt; Sub Msg
subscriptions _ =
    Sub.batch
        [ increment &lt;| always Increment
        ]

<span class="hljs-comment">-- State definition</span>
type alias State =
    { counter : Int }


<span class="hljs-comment">-- Initial state</span>
initState : State
initState =
    { counter = 0 }


<span class="hljs-comment">-- This encoder will be used to send your state to Redux</span>
encode : State -&gt; Json.Value
encode state =
    Json.object
        [ ( &quot;counter&quot;, <span class="hljs-type">Json</span>.int state.counter )
        ]


<span class="hljs-comment">-- Messages that we need to handle in update function</span>
type Msg
    = Increment


<span class="hljs-comment">-- That is essentially a reducer</span>
update : Msg -&gt; State -&gt; ( <span class="hljs-type">State</span>, <span class="hljs-type">Cmd</span> <span class="hljs-type">Msg</span> )
update action state =
    case action of
        Increment -&gt;
            ( { state | counter = state.counter + 1 }
            , <span class="hljs-type">Cmd</span>.none
            )

main =
    Redux.program
        { init = ( initState, <span class="hljs-type">Cmd</span>.none )
        , update = update
        , encode = encode
        , subscriptions = subscriptions
        }
</code></pre>
<p>The latest version, v6.0.0, allows to send data back from Elm to Redux, what
makes it easy to write simple middlewares that can wire together different
libraries with Elm, like <code>react-router</code>. I will include an example of using
this middleware and <code>react-router</code> in the upcoming post.</p></div><div class="Post_footer__JGzaD">If you enjoyed the reading, you can tip me <a href="https://fundof.me/kuzzmi?tip" target="_blank" rel="noreferrer">here</a> ðŸ˜‰</div></div></article></section><div class="PageLayout_flag__XuZGa"><div class="PageLayout_blue__CUemv"></div><div class="PageLayout_yellow__R8WIm"></div></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"html":"\u003cp\u003eIf you've ever used \u003ca href=\"https://elm-lang.org/\"\u003eElm\u003c/a\u003e, you might already know that it makes your code free\n(\u003cem\u003ealmost\u003c/em\u003e) of runtime errors, which are quite common in JavaScript\napplications.\u003c/p\u003e\n\u003cp\u003eIf you haven't, then go check it out, it's awesome and there is no way back.\nOnce you felt this taste of functional programming language that's tailored to\nfix all issues we've ever had with JavaScript, you won't be able to unsee it.\u003c/p\u003e\n\u003ch2 id=\"motivation\"\u003eMotivation\u003c/h2\u003e\n\u003cp\u003eAfter creating a bunch of applications with Elm, you start missing some\nincredibly awesome features like pattern matching, strict type checking,\nsomewhat complete functional programming experience.\u003c/p\u003e\n\u003cp\u003eSome principles from \u003ca href=\"https://guide.elm-lang.org/architecture/\"\u003eThe Elm Architecture\u003c/a\u003e were taken as a basis for one of\nthe most popular libraries for JavaScript, an awesome state managing library,\n\u003ca href=\"https://redux.js.org/\"\u003eRedux\u003c/a\u003e. And when you have any Elm experience, you start missing error messages\nthat you haven't implemented some message in an \u003ccode\u003eupdate\u003c/code\u003e function, or that you\nforgot to update a handful of functions after some refactoring.\u003c/p\u003e\n\u003cp\u003eWhen I started working on a new project a year ago, I made a decision to use\nElm in combination with \u003ca href=\"https://reactjs.org/\"\u003eReact\u003c/a\u003e, \u003ca href=\"https://facebook.github.io/react-native/\"\u003eReact Native\u003c/a\u003e and \u003ca href=\"https://redux.js.org/\"\u003eRedux\u003c/a\u003e. The main reason\nwas that React components were easily reused for web and mobile, and Elm\ncould protect the application from runtime exceptions and from potential\npainful refactorings, that are inevitable in every startup.\u003c/p\u003e\n\u003cp\u003eSo the basic idea is that you can write Redux reducer in Elm and use all nifty\nlibraries and components available for React and React Native.\u003c/p\u003e\n\u003cp\u003eWhen I was looking for my options I found a \u003ca href=\"https://github.com/cureous/redux-elm-middleware\"\u003elibrary\u003c/a\u003e called\n\u003cstrong\u003eredux-elm-middleware\u003c/strong\u003e. The original repo was abandoned and after some time I\njust forked it, fixed a bunch of bugs, added a couple of nice features and a\nyear later would like to give you a brief intro to how to make your life\nawesome.\u003c/p\u003e\n\u003ch2 id=\"howitworks\"\u003eHow It Works\u003c/h2\u003e\n\u003cp\u003eElm supports basic interoperability with JavaScript using\n\u003ca href=\"https://guide.elm-lang.org/interop/javascript.html\"\u003eports\u003c/a\u003e. The basic idea behind ports is that you can define\nsenders and listeners that will create a \"bridge\" between JS and Elm. These\nports are available through \u003ccode\u003eElm.ports\u003c/code\u003e object in JavaScript.\u003c/p\u003e\n\u003cp\u003eSenders, ports that send data from Elm, have \u003ccode\u003esubscribe\u003c/code\u003e method in JavaScript,\nand listeners, ports that receive data in Elm, have \u003ccode\u003esend\u003c/code\u003e method in\nJavaScript.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eredux-elm-middleware\u003c/strong\u003e looks for available ports and depending on which port\nis triggered, or which Redux action is dispatched, passes it further to other\nreducers, or to Elm Reducer, accordingly.\u003c/p\u003e\n\u003ch2 id=\"example\"\u003eExample\u003c/h2\u003e\n\u003cp\u003eSetting up \u003cstrong\u003eredux-elm-middleware\u003c/strong\u003e is fairly easy procedure:\u003c/p\u003e\n\u003cpre class=\"js language-js\"\u003e\u003ccode class=\"hljs js language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// createStore.js\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// or anywhere where you define your store\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { createStore, applyMiddleware, combineReducers } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;redux\u0026#x27;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e createElmMiddleware, { reducer \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e elmReducer } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;@cureous/redux-elm-middleware\u0026#x27;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eElm\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;./elm/Reducer.elm\u0026#x27;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e elmWorker = \u003cspan class=\"hljs-title class_\"\u003eElm\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eReducer\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eworker\u003c/span\u003e();\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { run \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e runElmWorker, elmMiddleware } = \u003cspan class=\"hljs-title function_\"\u003ecreateElmMiddleware\u003c/span\u003e(elmWorker);\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e reducer = \u003cspan class=\"hljs-title function_\"\u003ecombineReducers\u003c/span\u003e({\n    \u003cspan class=\"hljs-attr\"\u003eelm\u003c/span\u003e: elmReducer,\n});\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e store = \u003cspan class=\"hljs-title function_\"\u003ecreateStore\u003c/span\u003e(\n    reducer,\n    {},\n    \u003cspan class=\"hljs-title function_\"\u003eapplyMiddleware\u003c/span\u003e(elmMiddleware),\n);\n\n\u003cspan class=\"hljs-title function_\"\u003erunElmWorker\u003c/span\u003e(store);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThen you need to create \u003ccode\u003e./elm/Reducer.elm\u003c/code\u003e file with the \u003ccode\u003eRedux.program\u003c/code\u003e as an\nentry point:\u003c/p\u003e\n\u003cpre class=\"elm language-elm\"\u003e\u003ccode class=\"hljs elm language-elm\"\u003e\u003cspan class=\"hljs-comment\"\u003e-- ./elm/Reducer.elm\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003emodule\u003c/span\u003e Reducer \u003cspan class=\"hljs-keyword\"\u003eexposing\u003c/span\u003e (..)\n\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e Json.Encode \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e Json\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e Redux\n\n\n\u003cspan class=\"hljs-comment\"\u003e-- This is a listener port\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eport\u003c/span\u003e increment : ({} -\u0026gt; msg) -\u0026gt; Sub msg\n\n\nsubscriptions : State -\u0026gt; Sub Msg\nsubscriptions _ =\n    Sub.batch\n        [ increment \u0026lt;| always Increment\n        ]\n\n\u003cspan class=\"hljs-comment\"\u003e-- State definition\u003c/span\u003e\ntype alias State =\n    { counter : Int }\n\n\n\u003cspan class=\"hljs-comment\"\u003e-- Initial state\u003c/span\u003e\ninitState : State\ninitState =\n    { counter = 0 }\n\n\n\u003cspan class=\"hljs-comment\"\u003e-- This encoder will be used to send your state to Redux\u003c/span\u003e\nencode : State -\u0026gt; Json.Value\nencode state =\n    Json.object\n        [ ( \u0026quot;counter\u0026quot;, \u003cspan class=\"hljs-type\"\u003eJson\u003c/span\u003e.int state.counter )\n        ]\n\n\n\u003cspan class=\"hljs-comment\"\u003e-- Messages that we need to handle in update function\u003c/span\u003e\ntype Msg\n    = Increment\n\n\n\u003cspan class=\"hljs-comment\"\u003e-- That is essentially a reducer\u003c/span\u003e\nupdate : Msg -\u0026gt; State -\u0026gt; ( \u003cspan class=\"hljs-type\"\u003eState\u003c/span\u003e, \u003cspan class=\"hljs-type\"\u003eCmd\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eMsg\u003c/span\u003e )\nupdate action state =\n    case action of\n        Increment -\u0026gt;\n            ( { state | counter = state.counter + 1 }\n            , \u003cspan class=\"hljs-type\"\u003eCmd\u003c/span\u003e.none\n            )\n\nmain =\n    Redux.program\n        { init = ( initState, \u003cspan class=\"hljs-type\"\u003eCmd\u003c/span\u003e.none )\n        , update = update\n        , encode = encode\n        , subscriptions = subscriptions\n        }\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe latest version, v6.0.0, allows to send data back from Elm to Redux, what\nmakes it easy to write simple middlewares that can wire together different\nlibraries with Elm, like \u003ccode\u003ereact-router\u003c/code\u003e. I will include an example of using\nthis middleware and \u003ccode\u003ereact-router\u003c/code\u003e in the upcoming post.\u003c/p\u003e","type":"blog","meta":{"slug":"use-elm-as-a-reducer-in-redux","title":"Use Elm as a Reducer in Redux","layout":"post","lang":"en","description":"Want to use Elm in your project, but a bit hesitant going cold turkey? In this blog post I'll try to show how you can use the best from both worlds bulletproof Elm logic and ridiculously rich React components library.\n","tags":["technology","react","redux","web development","javascript","elm"],"date":"2018-07-28 22:53:59 +0200"}},"_nextI18Next":{"initialI18nStore":{"en":{"common":{"common":{"name":"Igor Kuzmenko","version":"version","articleFooter":"If you enjoyed the reading, you can tip me \u003ca href=\"https://fundof.me/kuzzmi?tip\" target=\"_blank\" rel=\"noreferrer\"\u003ehere\u003c/a\u003e ðŸ˜‰","articleNotAvailable":"This content is available only in Ukrainian."},"menu":{"home":"Home","blog":"Tech articles","thoughts":"Thoughts","podcast":"Podcast","projects":"Projects","about":"About me"},"home":{"meta":{"description":"Home page of Igor Kuzmenko"},"bio":"developer and tech entrepreneur","read":"Read","recents":"Recent publications","description":{"part_1":"Here I publish ","part_2":"my thoughts","part_3":" and ","part_4":" tech articles","part_5":". Avid Linux and vim user. Co-founder at "}},"blog":{"description":"Different findings in the tech world that I want to share with world."},"thoughts":{"description":"My thoughts about life and work in Ukrainian."},"about":{"body":"Hi ðŸ‘‹\u003cbr /\u003e\u003cbr /\u003eMy name is Igor Kuzmenko. I love my wife, son, dog and cat. And I love making things up and making them real (but more often this doesn't happen).\u003cbr /\u003e\u003cbr /\u003eFor a long time, my personal page seemed like an official paper with a bunch of clichÃ©s, so I got sick of it and turned it into something what feels more like me and my approach to life: a combination of lightness, aesthetics, some seriousness and humor (and modesty).\u003cbr /\u003e\u003cbr /\u003eI spend my spare time with my family, doing pet projects, playing video games and more: from playing the ukulele and drawing, to electrical engineering and sports car driving.\u003cbr /\u003e\u003cbr /\u003eI've tried countless times to increase my online presence, but it never lasts long ðŸ™ƒ\u003cbr /\u003e\u003cbr /\u003eMy social networks and contacts are available here: \u003ca href=\"https://fundof.me/igor\"\u003efundof.me/igor\u003c/a\u003e"}}}},"initialLocale":"en","userConfig":{"i18n":{"defaultLocale":"en","locales":["en","ua"]},"default":{"i18n":{"defaultLocale":"en","locales":["en","ua"]}}}}},"__N_SSG":true},"page":"/[locale]/blog/[slug]","query":{"locale":"en","slug":"use-elm-as-a-reducer-in-redux"},"buildId":"pHsXiBIdWUiOfxF4_IgSp","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>