<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Creating Ember CLI Addon with External Library. Part 1 | Tech articles | Igor Kuzmenko</title><meta name="robots" content="index,follow"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:creator" content="@kuzzmi"/><meta property="og:title" content="Creating Ember CLI Addon with External Library. Part 1"/><meta property="og:description" content="In this post I&#x27;ll try to describe a step-by-step creation of Ember CLI addon for wrapping an external library, covering just basics that will allow you to wrap your favorite libraries and reuse them in Ember.
"/><meta property="og:url" content="https://kuzzmi.com/en/blog/creating-ember-cli-addon-with-external-library-part-1/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2016-02-15T16:50:36Z"/><meta property="article:author" content="https://kuzzmi.com/about"/><meta property="article:tag" content="technology"/><meta property="article:tag" content="ember"/><meta property="article:tag" content="tutorial"/><meta property="article:tag" content="javascript"/><meta property="og:image" content="https://kuzzmi.com/assets/articles/blog/creating-ember-cli-addon-with-external-library-part-1/cover.png"/><meta property="og:image:alt" content="Creating Ember CLI Addon with External Library. Part 1"/><meta property="og:image:type" content="image/png"/><meta property="og:image:width" content="1342"/><meta property="og:image:height" content="853"/><link rel="canonical" href="https://kuzzmi.com/en/blog/creating-ember-cli-addon-with-external-library-part-1/"/><meta name="next-head-count" content="22"/><link rel="dns-prefetch" href="https://www.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="180x180" href="/static/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicon-16x16.png"/><link rel="manifest" href="/static/site.webmanifest"/><link rel="shortcut icon" href="/static/favicon.ico" type="image/x-icon"/><meta name="apple-mobile-web-app-capable" content="yes"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/styles/base16/railscasts.min.css"/><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/highlight.min.js"></script><meta name="author" content="Igor Kuzmenko"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="/_next/static/css/8d3077ef275150e2.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8d3077ef275150e2.css" data-n-g=""/><link rel="preload" href="/_next/static/css/5efee9f793991289.css" as="style"/><link rel="stylesheet" href="/_next/static/css/5efee9f793991289.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-fc97f3f1282ce3ed.js" defer=""></script><script src="/_next/static/chunks/main-fca90e9fb8aa5e83.js" defer=""></script><script src="/_next/static/chunks/pages/_app-84072d5e9d49e694.js" defer=""></script><script src="/_next/static/chunks/47-1461360545d2f08c.js" defer=""></script><script src="/_next/static/chunks/962-41b19898a46b0b4f.js" defer=""></script><script src="/_next/static/chunks/pages/%5Blocale%5D/blog/%5Bslug%5D-d79292be3e979f1e.js" defer=""></script><script src="/_next/static/ni9QrGw6Qmb3NE0ha6JGE/_buildManifest.js" defer=""></script><script src="/_next/static/ni9QrGw6Qmb3NE0ha6JGE/_ssgManifest.js" defer=""></script><script src="/_next/static/ni9QrGw6Qmb3NE0ha6JGE/_middlewareManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=JetBrains+Mono&family=PT+Sans:ital,wght@0,400;0,700;1,400&display=swap">@font-face{font-family:'JetBrains Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/jetbrainsmono/v11/tDbY2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8yKxjPg.woff) format('woff')}@font-face{font-family:'PT Sans';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v16/jizYRExUiTo99u79D0eEww.woff) format('woff')}@font-face{font-family:'PT Sans';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v16/jizaRExUiTo99u79P0Y.woff) format('woff')}@font-face{font-family:'PT Sans';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v16/jizfRExUiTo99u79B_mh4Oo.woff) format('woff')}@font-face{font-family:'JetBrains Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/jetbrainsmono/v11/tDbY2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8yKxTN1OTk6OThhvAWV8.woff) format('woff');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'JetBrains Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/jetbrainsmono/v11/tDbY2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8yKxTPlOTk6OThhvAWV8.woff) format('woff');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'JetBrains Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/jetbrainsmono/v11/tDbY2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8yKxTOVOTk6OThhvAWV8.woff) format('woff');unicode-range:U+0370-03FF}@font-face{font-family:'JetBrains Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/jetbrainsmono/v11/tDbY2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8yKxTNVOTk6OThhvAWV8.woff) format('woff');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'JetBrains Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/jetbrainsmono/v11/tDbY2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8yKxTNFOTk6OThhvAWV8.woff) format('woff');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'JetBrains Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/jetbrainsmono/v11/tDbY2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8yKxTOlOTk6OThhvA.woff) format('woff');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'PT Sans';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v16/jizYRExUiTo99u79D0e0ysmIAjcQ-woy.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'PT Sans';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v16/jizYRExUiTo99u79D0e0w8mIAjcQ-woy.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'PT Sans';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v16/jizYRExUiTo99u79D0e0ycmIAjcQ-woy.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'PT Sans';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v16/jizYRExUiTo99u79D0e0x8mIAjcQ-w.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'PT Sans';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v16/jizaRExUiTo99u79D0-ExcOPIDUg-g.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'PT Sans';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v16/jizaRExUiTo99u79D0aExcOPIDUg-g.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'PT Sans';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v16/jizaRExUiTo99u79D0yExcOPIDUg-g.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'PT Sans';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v16/jizaRExUiTo99u79D0KExcOPIDU.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'PT Sans';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v16/jizfRExUiTo99u79B_mh0OOtLR8a8zILig.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'PT Sans';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v16/jizfRExUiTo99u79B_mh0OqtLR8a8zILig.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'PT Sans';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v16/jizfRExUiTo99u79B_mh0OCtLR8a8zILig.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'PT Sans';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v16/jizfRExUiTo99u79B_mh0O6tLR8a8zI.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next"><main class="PageLayout_page_container__M8QGN "><menu class="PageLayout_menu_container__La6NU"><ul><li class="PageLayout_inactive__g2bTn"><a href="/en/">Home</a></li><li><a href="/en/blog/">Tech articles</a></li><li class="PageLayout_inactive__g2bTn"><a href="/en/thoughts/">Thoughts</a></li><li class="PageLayout_inactive__g2bTn"><a href="/en/about/">About me</a></li></ul></menu><section class="PageLayout_content_container__1IMZI"><header class="PageLayout_header_container__Y6dbq"><div><div class="PageLayout_menu_button__vWi4y"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24px" height="24px"><path fill="none" stroke="#000000" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M3 12L21 12M3 6L21 6M3 18L21 18"></path></svg></div><p class="PageLayout_name__xhUaP"></p></div><div class="PageLayout_lang_switcher___L3bH"><p class="PageLayout_version__2_iha">version<!-- -->:<!-- --></p><div class="PageLayout_langs__z_SxD"><a class="" href="/ua/blog/creating-ember-cli-addon-with-external-library-part-1/">üá∫üá¶</a><a class="PageLayout_active__UxQoO" href="/en/blog/creating-ember-cli-addon-with-external-library-part-1/">üá¨üáß</a></div></div></header><article class="PageLayout_content__6Pdc3"><div class="Post_container__jmeoa"><h1>Creating Ember CLI Addon with External Library. Part 1</h1><p class="Post_date__B7bMG">2/15/2016, 6:50:36 PM</p><div><p>In the comments section to my previous <a href="/blog/web-fonts-webfontloader-and-ember">post</a> Ken Snyder suggested to wrap the <a href="https://github.com/typekit/webfontloader">WebFontLoader</a> library in <a href="http://ember-cli.com">Ember CLI</a> addon. That is definitely a good idea because using <a href="https://github.com/typekit/webfontloader">WebFontLoader</a> is a wise solution when it comes to loading web fonts and detecting whether the font is loaded or not.</p>
<p>So let's try to make this addon together.</p>
<p>First things first, let's create an outline of what our addon has to do:</p>
<ol>
<li>It has to load fonts</li>
<li>It has to allow using WebFontLoader events system</li>
</ol>
<p><strong>Note</strong>: This tutorial will teach you only the basics that you need to wrap your favorite library in ember addon. So in this part I will cover only the first item from the list.</p>
<h2 id="preparation">Preparation</h2>
<p>To start developing our addon we need to generate a basic addon structure, to do that we need to execute:</p>
<pre><code class="hljs">ember addon ember-<span class="hljs-keyword">cli</span>-webfontloader
</code></pre>
<p>After a few moments ember-cli will create a folder structure with all necessary files and initiate <code>bower install</code> and <code>npm install</code>. After that you'll have a basic "do nothing" addon sources.</p>
<p>As you may know, <a href="http://emberjs.org">Ember</a> follows the ‚Äúconvention over configuration‚Äù, the same does Ember CLI, this is why you may find the generated structure pretty familiar:</p>
<pre><code class="hljs">|<span class="hljs-string">~ember-cli-webfontloader/
</span>|<span class="hljs-string"> </span>|<span class="hljs-string">+.git/
</span>|<span class="hljs-string"> </span>|<span class="hljs-string">+addon/
</span>|<span class="hljs-string"> </span>|<span class="hljs-string">+app/
</span>|<span class="hljs-string"> </span>|<span class="hljs-string">+bower_components/
</span>|<span class="hljs-string"> </span>|<span class="hljs-string">+config/
</span>|<span class="hljs-string"> </span>|<span class="hljs-string">+node_modules/
</span>|<span class="hljs-string"> </span>|<span class="hljs-string">+tests/
</span>|<span class="hljs-string"> </span>|<span class="hljs-string">+tmp/
</span>|<span class="hljs-string"> </span>|<span class="hljs-string">+vendor/
</span>|<span class="hljs-string"> </span>|<span class="hljs-string">-.bowerrc
</span>|<span class="hljs-string"> </span>|<span class="hljs-string">-.editorconfig
</span>|<span class="hljs-string"> </span>|<span class="hljs-string">-.ember-cli
</span>|<span class="hljs-string"> </span>|<span class="hljs-string">-.gitignore
</span>|<span class="hljs-string"> </span>|<span class="hljs-string">-.jshintrc
</span>|<span class="hljs-string"> </span>|<span class="hljs-string">-.npmignore
</span>|<span class="hljs-string"> </span>|<span class="hljs-string">-.travis.yml
</span>|<span class="hljs-string"> </span>|<span class="hljs-string">-.watchmanconfig
</span>|<span class="hljs-string"> </span>|<span class="hljs-string">-bower.json
</span>|<span class="hljs-string"> </span>|<span class="hljs-string">-ember-cli-build.js
</span>|<span class="hljs-string"> </span>|<span class="hljs-string">-index.js
</span>|<span class="hljs-string"> </span>|<span class="hljs-string">-LICENSE.md
</span>|<span class="hljs-string"> </span>|<span class="hljs-string">-package.json
</span>|<span class="hljs-string"> </span>|<span class="hljs-string">-README.md
</span>|<span class="hljs-string"> `-testem.json
</span></code></pre>
<p><strong>Note</strong>: Unfortunately, at the time of writing this post, the latest version of <a href="http://emberjs.org">Ember</a> (2.3.1) has a bug, related to the new version of <a href="http://jquery.com">jQuery</a> (1.12). Ember is not able to handle the new version of jQuery and <code>ember test</code> and <code>ember server</code> are not working because of that. See StackOverflow topic related to that issue: <a href="http://stackoverflow.com/questions/34702284/getting-uncaught-error-assertion-failed-ember-views-require-jquery-between-1">link</a>. The solution from SO answer:</p>
<blockquote>
  <p>For now you can change the following line in your <code>bower.json</code> file. Then run <code>bower install</code> and it should work.
  <code>"jquery": "^1.11.3"</code>, to <code>"jquery": "1.11.3"</code></p>
</blockquote>
<p>After we installed all our dependencies we need to check if everything is working. In order to do this, run:</p>
<pre><code class="hljs"><span class="hljs-attribute">ember t</span>
</code></pre>
<p><code>ember t</code> is a shortcut for <code>ember test</code>.</p>
<p>If everything is fine, you'll see the result of successfuly passed tests.</p>
<p>Ok, so we're ready to move forward. We need to obtain the third party library. Usually, this can be done by using the power of <a href="http://bower.io/">Bower</a>, but at the moment of writing, <a href="https://github.com/typekit/webfontloader">WebFontLoader</a> is still <strong>not</strong> using <a href="http://bower.io/">Bower</a>, according to their <a href="https://github.com/typekit/webfontloader/issues/302">issue tracker</a>, so we need to download the library from their release page, or via a <a href="https://github.com/typekit/webfontloader/raw/master/webfontloader.js">direct link</a> and put it to <code>/vendor/</code> folder.</p>
<p>The steps for adding a bower dependency are not yet covered here, but they will be as soon as WebFontLoader team releases it there.</p>
<h2 id="configuringaddon">Configuring Addon</h2>
<p>Next step is to tell what should be included into Ember app, after the addon is installed. To do this, we need to use our <code>/index.js</code> file which is an entrance point of our addon.</p>
<pre class="javascript language-javascript"><code class="hljs javascript language-javascript"><span class="hljs-comment">// ember-cli-webfontloader/index.js</span>
<span class="hljs-meta">&#x27;use strict&#x27;</span>;

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;ember-cli-webfontloader&#x27;</span>,

    <span class="hljs-title function_">included</span>(<span class="hljs-params">app</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_super</span>.<span class="hljs-title function_">included</span>(app);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">app</span>.<span class="hljs-title function_">import</span>(<span class="hljs-string">&#x27;vendor/webfontloader.js&#x27;</span>, {
            <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;vendor&#x27;</span>
        });
    }

};
</code></pre>
<p>As our library is external and it is using one single global variable, JSHint will either complain about using unassigned variable or we need to write in all our files <code>/* globals WebFont: true */</code>. To avoid both cases we need somehow make this variable exportable by using module system from ES6. To do this we need create a shim file, let's say, in <code>/vendor/webfontloader.shim.js</code> with the following structure:</p>
<pre class="javascript language-javascript"><code class="hljs javascript language-javascript"><span class="hljs-comment">// vendor/webfontloader.shim.js</span>
<span class="hljs-comment">/* globals WebFont */</span>
<span class="hljs-meta">
&#x27;use strict&#x27;</span>;

<span class="hljs-title function_">define</span>(<span class="hljs-string">&#x27;webfontloader&#x27;</span>, [], <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">return</span> { <span class="hljs-string">&#x27;default&#x27;</span>: <span class="hljs-title class_">WebFont</span> };
});
</code></pre>
<p>After doing that we have to update <code>/index.js</code> and include our shim file and mark it as exporable:</p>
<pre class="javascript language-javascript"><code class="hljs javascript language-javascript"><span class="hljs-comment">// ember-cli-webfontloader/index.js</span>
...
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">_super</span>.<span class="hljs-title function_">included</span>(app);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">app</span>.<span class="hljs-title function_">import</span>(<span class="hljs-string">&#x27;vendor/webfontloader.js&#x27;</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">app</span>.<span class="hljs-title function_">import</span>(<span class="hljs-string">&#x27;vendor/webfontloader.shim.js&#x27;</span>, {
         <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;vendor&#x27;</span>,
   <span class="hljs-attr">exports</span>: { <span class="hljs-string">&#x27;webfontloader&#x27;</span>: [<span class="hljs-string">&#x27;default&#x27;</span>] }
        }
...
</code></pre>
<p>Alright, now we can start with implementing features we outlined earlier.</p>
<p>Usually, we need to load fonts only once and to do so in the first place, after an application is loaded. Therefore we're probably gonna use <code>initializer</code>, Ember's framework part, that allows you to do stuff as your app boots. If you're not familiar with them, please check <a href="https://guides.emberjs.com/v2.1.0/applications/initializers/">Ember's guide</a>.</p>
<p>So, let's create an initializer by running:</p>
<pre><code class="hljs">ember g initializer ember-<span class="hljs-keyword">cli</span>-webfontloader
</code></pre>
<p>This will create 3 files: initializer file, test file, and one for being inserted as an initializer to the actual app. We need only the first one, where we should keep all our logic.</p>
<p>Here's how the initializer will look like:</p>
<pre class="javascript language-javascript"><code class="hljs javascript language-javascript"><span class="hljs-comment">// app/initializers/ember-cli-webfontloader.js</span>
<span class="hljs-comment">// Let&#x27;s keep our configuration in the main configuration file</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Ember</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;ember&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-variable constant_">ENV</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../config/environment&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">WebFont</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;webfontloader&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">initialize</span>(<span class="hljs-params"></span>) {
 <span class="hljs-comment">// Checking configuration for webFontConfig</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Ember</span>.<span class="hljs-title function_">get</span>(<span class="hljs-variable constant_">ENV</span>, <span class="hljs-string">&#x27;webFontConfig&#x27;</span>)) {
        <span class="hljs-keyword">return</span>;
    }

 <span class="hljs-comment">// Getting all font families that should be loaded from</span>
    <span class="hljs-comment">// configuration</span>
    <span class="hljs-keyword">let</span> config = <span class="hljs-title class_">Ember</span>.<span class="hljs-title function_">get</span>(<span class="hljs-variable constant_">ENV</span>, <span class="hljs-string">&#x27;webFontConfig&#x27;</span>);

 <span class="hljs-comment">// If there are families, we need to load them</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(config).<span class="hljs-property">length</span>) {
        <span class="hljs-title class_">WebFont</span>.<span class="hljs-title function_">load</span>(config);
    }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;ember-cli-webfontloader&#x27;</span>,
    initialize
};
</code></pre>
<p>That's all we need here to do. We check config, get font-families that we want to load, and load them. Now we can mark our first bullet as done.</p>
<h3 id="installingandsanitychecking">Installing and Sanity Checking</h3>
<p>So now we need to install our addon to check how it's working:</p>
<pre><code class="hljs">ember install ember-<span class="hljs-keyword">cli</span>-webfontloader
</code></pre>
<p>In order to check if our addon is working with a real app, Ember CLI creates a folder called <code>dummy</code> which is created specifically for that and is served, when we use <code>ember server</code> command. So running <code>install</code> command will install our addon to the dummy application.</p>
<p>After we configure our dummy app to use some font-families:</p>
<pre class="javascript language-javascript"><code class="hljs javascript language-javascript"><span class="hljs-comment">// config/environment.js</span>
<span class="hljs-meta">&#x27;use strict&#x27;</span>;

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">webFontConfig</span>: {
            <span class="hljs-attr">google</span>: {
                <span class="hljs-attr">families</span>: [<span class="hljs-string">&#x27;Roboto Mono&#x27;</span>]
            }
        }
    };
};
</code></pre>
<p>Also we need to update the css file:</p>
<pre class="css language-css"><code class="hljs css language-css"><span class="hljs-comment">/* ember-cli-webfontloader/tests/dummy/app/styles/app.css */</span>

<span class="hljs-selector-tag">html</span> {
    <span class="hljs-attribute">font-family</span>: <span class="hljs-string">&#x27;Roboto Mono&#x27;</span>
}
</code></pre>
<p>Now we can start our app and see if it works:</p>
<pre><code class="hljs"><span class="hljs-attribute">ember serve</span>
</code></pre>
<p>If we navigate to <code>localhost:4200</code>, you will see, that it displays <code>Welcome to Ember</code> written with Roboto Mono font.</p>
<p>So now you have already working addon, which can do something useful. In the next part, I will try to cover by solving problem #2 (working with events) how we can inject services, some other techniques of how we can improve structure and independence of our current version.</p>
<h2 id="links">Links</h2>
<ul>
<li><a href="https://github.com/typekit/webfontloader">WebFontLoader - GitHub</a></li>
<li><a href="http://ember-cli.com/extending/#developing-addons-and-blueprints">Ember CLI - Developing addons and blueprints</a></li>
<li><a href="https://gist.github.com/kristianmandrup/ae3174217f68a6a51ed5#file-converting-libraries-to-ember-cli-addons-md">Converting libraries to Ember CLI addons</a></li>
<li><a href="http://johnotander.com/ember/2014/12/14/creating-an-emberjs-addon-with-the-ember-cli/">Creating an Ember.js Addon With the Ember CLI</a></li>
</ul></div><div class="Post_footer__JGzaD">If you enjoyed the reading, you can tip me <a href="https://fundof.me/kuzzmi?tip" target="_blank" rel="noreferrer">here</a> üòâ</div></div></article></section><div class="PageLayout_flag__XuZGa"><div class="PageLayout_blue__CUemv"></div><div class="PageLayout_yellow__R8WIm"></div></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"html":"\u003cp\u003eIn the comments section to my previous \u003ca href=\"/blog/web-fonts-webfontloader-and-ember\"\u003epost\u003c/a\u003e Ken Snyder suggested to wrap the \u003ca href=\"https://github.com/typekit/webfontloader\"\u003eWebFontLoader\u003c/a\u003e library in \u003ca href=\"http://ember-cli.com\"\u003eEmber CLI\u003c/a\u003e addon. That is definitely a good idea because using \u003ca href=\"https://github.com/typekit/webfontloader\"\u003eWebFontLoader\u003c/a\u003e is a wise solution when it comes to loading web fonts and detecting whether the font is loaded or not.\u003c/p\u003e\n\u003cp\u003eSo let's try to make this addon together.\u003c/p\u003e\n\u003cp\u003eFirst things first, let's create an outline of what our addon has to do:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eIt has to load fonts\u003c/li\u003e\n\u003cli\u003eIt has to allow using WebFontLoader events system\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003cstrong\u003eNote\u003c/strong\u003e: This tutorial will teach you only the basics that you need to wrap your favorite library in ember addon. So in this part I will cover only the first item from the list.\u003c/p\u003e\n\u003ch2 id=\"preparation\"\u003ePreparation\u003c/h2\u003e\n\u003cp\u003eTo start developing our addon we need to generate a basic addon structure, to do that we need to execute:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs\"\u003eember addon ember-\u003cspan class=\"hljs-keyword\"\u003ecli\u003c/span\u003e-webfontloader\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAfter a few moments ember-cli will create a folder structure with all necessary files and initiate \u003ccode\u003ebower install\u003c/code\u003e and \u003ccode\u003enpm install\u003c/code\u003e. After that you'll have a basic \"do nothing\" addon sources.\u003c/p\u003e\n\u003cp\u003eAs you may know, \u003ca href=\"http://emberjs.org\"\u003eEmber\u003c/a\u003e follows the ‚Äúconvention over configuration‚Äù, the same does Ember CLI, this is why you may find the generated structure pretty familiar:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs\"\u003e|\u003cspan class=\"hljs-string\"\u003e~ember-cli-webfontloader/\n\u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e \u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e+.git/\n\u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e \u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e+addon/\n\u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e \u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e+app/\n\u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e \u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e+bower_components/\n\u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e \u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e+config/\n\u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e \u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e+node_modules/\n\u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e \u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e+tests/\n\u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e \u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e+tmp/\n\u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e \u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e+vendor/\n\u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e \u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e-.bowerrc\n\u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e \u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e-.editorconfig\n\u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e \u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e-.ember-cli\n\u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e \u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e-.gitignore\n\u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e \u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e-.jshintrc\n\u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e \u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e-.npmignore\n\u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e \u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e-.travis.yml\n\u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e \u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e-.watchmanconfig\n\u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e \u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e-bower.json\n\u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e \u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e-ember-cli-build.js\n\u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e \u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e-index.js\n\u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e \u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e-LICENSE.md\n\u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e \u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e-package.json\n\u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e \u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e-README.md\n\u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e `-testem.json\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eNote\u003c/strong\u003e: Unfortunately, at the time of writing this post, the latest version of \u003ca href=\"http://emberjs.org\"\u003eEmber\u003c/a\u003e (2.3.1) has a bug, related to the new version of \u003ca href=\"http://jquery.com\"\u003ejQuery\u003c/a\u003e (1.12). Ember is not able to handle the new version of jQuery and \u003ccode\u003eember test\u003c/code\u003e and \u003ccode\u003eember server\u003c/code\u003e are not working because of that. See StackOverflow topic related to that issue: \u003ca href=\"http://stackoverflow.com/questions/34702284/getting-uncaught-error-assertion-failed-ember-views-require-jquery-between-1\"\u003elink\u003c/a\u003e. The solution from SO answer:\u003c/p\u003e\n\u003cblockquote\u003e\n  \u003cp\u003eFor now you can change the following line in your \u003ccode\u003ebower.json\u003c/code\u003e file. Then run \u003ccode\u003ebower install\u003c/code\u003e and it should work.\n  \u003ccode\u003e\"jquery\": \"^1.11.3\"\u003c/code\u003e, to \u003ccode\u003e\"jquery\": \"1.11.3\"\u003c/code\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eAfter we installed all our dependencies we need to check if everything is working. In order to do this, run:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs\"\u003e\u003cspan class=\"hljs-attribute\"\u003eember t\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003eember t\u003c/code\u003e is a shortcut for \u003ccode\u003eember test\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eIf everything is fine, you'll see the result of successfuly passed tests.\u003c/p\u003e\n\u003cp\u003eOk, so we're ready to move forward. We need to obtain the third party library. Usually, this can be done by using the power of \u003ca href=\"http://bower.io/\"\u003eBower\u003c/a\u003e, but at the moment of writing, \u003ca href=\"https://github.com/typekit/webfontloader\"\u003eWebFontLoader\u003c/a\u003e is still \u003cstrong\u003enot\u003c/strong\u003e using \u003ca href=\"http://bower.io/\"\u003eBower\u003c/a\u003e, according to their \u003ca href=\"https://github.com/typekit/webfontloader/issues/302\"\u003eissue tracker\u003c/a\u003e, so we need to download the library from their release page, or via a \u003ca href=\"https://github.com/typekit/webfontloader/raw/master/webfontloader.js\"\u003edirect link\u003c/a\u003e and put it to \u003ccode\u003e/vendor/\u003c/code\u003e folder.\u003c/p\u003e\n\u003cp\u003eThe steps for adding a bower dependency are not yet covered here, but they will be as soon as WebFontLoader team releases it there.\u003c/p\u003e\n\u003ch2 id=\"configuringaddon\"\u003eConfiguring Addon\u003c/h2\u003e\n\u003cp\u003eNext step is to tell what should be included into Ember app, after the addon is installed. To do this, we need to use our \u003ccode\u003e/index.js\u003c/code\u003e file which is an entrance point of our addon.\u003c/p\u003e\n\u003cpre class=\"javascript language-javascript\"\u003e\u003ccode class=\"hljs javascript language-javascript\"\u003e\u003cspan class=\"hljs-comment\"\u003e// ember-cli-webfontloader/index.js\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e\u0026#x27;use strict\u0026#x27;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-variable language_\"\u003emodule\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eexports\u003c/span\u003e = {\n    \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026#x27;ember-cli-webfontloader\u0026#x27;\u003c/span\u003e,\n\n    \u003cspan class=\"hljs-title function_\"\u003eincluded\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eapp\u003c/span\u003e) {\n        \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_super\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eincluded\u003c/span\u003e(app);\n        \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eapp\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eimport\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;vendor/webfontloader.js\u0026#x27;\u003c/span\u003e, {\n            \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026#x27;vendor\u0026#x27;\u003c/span\u003e\n        });\n    }\n\n};\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAs our library is external and it is using one single global variable, JSHint will either complain about using unassigned variable or we need to write in all our files \u003ccode\u003e/* globals WebFont: true */\u003c/code\u003e. To avoid both cases we need somehow make this variable exportable by using module system from ES6. To do this we need create a shim file, let's say, in \u003ccode\u003e/vendor/webfontloader.shim.js\u003c/code\u003e with the following structure:\u003c/p\u003e\n\u003cpre class=\"javascript language-javascript\"\u003e\u003ccode class=\"hljs javascript language-javascript\"\u003e\u003cspan class=\"hljs-comment\"\u003e// vendor/webfontloader.shim.js\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e/* globals WebFont */\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e\n\u0026#x27;use strict\u0026#x27;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-title function_\"\u003edefine\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;webfontloader\u0026#x27;\u003c/span\u003e, [], \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e { \u003cspan class=\"hljs-string\"\u003e\u0026#x27;default\u0026#x27;\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eWebFont\u003c/span\u003e };\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAfter doing that we have to update \u003ccode\u003e/index.js\u003c/code\u003e and include our shim file and mark it as exporable:\u003c/p\u003e\n\u003cpre class=\"javascript language-javascript\"\u003e\u003ccode class=\"hljs javascript language-javascript\"\u003e\u003cspan class=\"hljs-comment\"\u003e// ember-cli-webfontloader/index.js\u003c/span\u003e\n...\n  \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_super\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eincluded\u003c/span\u003e(app);\n        \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eapp\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eimport\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;vendor/webfontloader.js\u0026#x27;\u003c/span\u003e);\n        \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eapp\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eimport\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;vendor/webfontloader.shim.js\u0026#x27;\u003c/span\u003e, {\n         \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026#x27;vendor\u0026#x27;\u003c/span\u003e,\n   \u003cspan class=\"hljs-attr\"\u003eexports\u003c/span\u003e: { \u003cspan class=\"hljs-string\"\u003e\u0026#x27;webfontloader\u0026#x27;\u003c/span\u003e: [\u003cspan class=\"hljs-string\"\u003e\u0026#x27;default\u0026#x27;\u003c/span\u003e] }\n        }\n...\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAlright, now we can start with implementing features we outlined earlier.\u003c/p\u003e\n\u003cp\u003eUsually, we need to load fonts only once and to do so in the first place, after an application is loaded. Therefore we're probably gonna use \u003ccode\u003einitializer\u003c/code\u003e, Ember's framework part, that allows you to do stuff as your app boots. If you're not familiar with them, please check \u003ca href=\"https://guides.emberjs.com/v2.1.0/applications/initializers/\"\u003eEmber's guide\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eSo, let's create an initializer by running:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs\"\u003eember g initializer ember-\u003cspan class=\"hljs-keyword\"\u003ecli\u003c/span\u003e-webfontloader\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis will create 3 files: initializer file, test file, and one for being inserted as an initializer to the actual app. We need only the first one, where we should keep all our logic.\u003c/p\u003e\n\u003cp\u003eHere's how the initializer will look like:\u003c/p\u003e\n\u003cpre class=\"javascript language-javascript\"\u003e\u003ccode class=\"hljs javascript language-javascript\"\u003e\u003cspan class=\"hljs-comment\"\u003e// app/initializers/ember-cli-webfontloader.js\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// Let\u0026#x27;s keep our configuration in the main configuration file\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eEmber\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;ember\u0026#x27;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eENV\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;../config/environment\u0026#x27;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eWebFont\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;webfontloader\u0026#x27;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003einitialize\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n \u003cspan class=\"hljs-comment\"\u003e// Checking configuration for webFontConfig\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (!\u003cspan class=\"hljs-title class_\"\u003eEmber\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-variable constant_\"\u003eENV\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;webFontConfig\u0026#x27;\u003c/span\u003e)) {\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e;\n    }\n\n \u003cspan class=\"hljs-comment\"\u003e// Getting all font families that should be loaded from\u003c/span\u003e\n    \u003cspan class=\"hljs-comment\"\u003e// configuration\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e config = \u003cspan class=\"hljs-title class_\"\u003eEmber\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-variable constant_\"\u003eENV\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;webFontConfig\u0026#x27;\u003c/span\u003e);\n\n \u003cspan class=\"hljs-comment\"\u003e// If there are families, we need to load them\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (\u003cspan class=\"hljs-title class_\"\u003eObject\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ekeys\u003c/span\u003e(config).\u003cspan class=\"hljs-property\"\u003elength\u003c/span\u003e) {\n        \u003cspan class=\"hljs-title class_\"\u003eWebFont\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eload\u003c/span\u003e(config);\n    }\n}\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e {\n    \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026#x27;ember-cli-webfontloader\u0026#x27;\u003c/span\u003e,\n    initialize\n};\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThat's all we need here to do. We check config, get font-families that we want to load, and load them. Now we can mark our first bullet as done.\u003c/p\u003e\n\u003ch3 id=\"installingandsanitychecking\"\u003eInstalling and Sanity Checking\u003c/h3\u003e\n\u003cp\u003eSo now we need to install our addon to check how it's working:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs\"\u003eember install ember-\u003cspan class=\"hljs-keyword\"\u003ecli\u003c/span\u003e-webfontloader\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIn order to check if our addon is working with a real app, Ember CLI creates a folder called \u003ccode\u003edummy\u003c/code\u003e which is created specifically for that and is served, when we use \u003ccode\u003eember server\u003c/code\u003e command. So running \u003ccode\u003einstall\u003c/code\u003e command will install our addon to the dummy application.\u003c/p\u003e\n\u003cp\u003eAfter we configure our dummy app to use some font-families:\u003c/p\u003e\n\u003cpre class=\"javascript language-javascript\"\u003e\u003ccode class=\"hljs javascript language-javascript\"\u003e\u003cspan class=\"hljs-comment\"\u003e// config/environment.js\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e\u0026#x27;use strict\u0026#x27;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-variable language_\"\u003emodule\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eexports\u003c/span\u003e = \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n        \u003cspan class=\"hljs-attr\"\u003ewebFontConfig\u003c/span\u003e: {\n            \u003cspan class=\"hljs-attr\"\u003egoogle\u003c/span\u003e: {\n                \u003cspan class=\"hljs-attr\"\u003efamilies\u003c/span\u003e: [\u003cspan class=\"hljs-string\"\u003e\u0026#x27;Roboto Mono\u0026#x27;\u003c/span\u003e]\n            }\n        }\n    };\n};\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAlso we need to update the css file:\u003c/p\u003e\n\u003cpre class=\"css language-css\"\u003e\u003ccode class=\"hljs css language-css\"\u003e\u003cspan class=\"hljs-comment\"\u003e/* ember-cli-webfontloader/tests/dummy/app/styles/app.css */\u003c/span\u003e\n\n\u003cspan class=\"hljs-selector-tag\"\u003ehtml\u003c/span\u003e {\n    \u003cspan class=\"hljs-attribute\"\u003efont-family\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026#x27;Roboto Mono\u0026#x27;\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow we can start our app and see if it works:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs\"\u003e\u003cspan class=\"hljs-attribute\"\u003eember serve\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIf we navigate to \u003ccode\u003elocalhost:4200\u003c/code\u003e, you will see, that it displays \u003ccode\u003eWelcome to Ember\u003c/code\u003e written with Roboto Mono font.\u003c/p\u003e\n\u003cp\u003eSo now you have already working addon, which can do something useful. In the next part, I will try to cover by solving problem #2 (working with events) how we can inject services, some other techniques of how we can improve structure and independence of our current version.\u003c/p\u003e\n\u003ch2 id=\"links\"\u003eLinks\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/typekit/webfontloader\"\u003eWebFontLoader - GitHub\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://ember-cli.com/extending/#developing-addons-and-blueprints\"\u003eEmber CLI - Developing addons and blueprints\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://gist.github.com/kristianmandrup/ae3174217f68a6a51ed5#file-converting-libraries-to-ember-cli-addons-md\"\u003eConverting libraries to Ember CLI addons\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://johnotander.com/ember/2014/12/14/creating-an-emberjs-addon-with-the-ember-cli/\"\u003eCreating an Ember.js Addon With the Ember CLI\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","type":"blog","meta":{"slug":"creating-ember-cli-addon-with-external-library-part-1","title":"Creating Ember CLI Addon with External Library. Part 1","layout":"post","lang":"en","description":"In this post I'll try to describe a step-by-step creation of Ember CLI addon for wrapping an external library, covering just basics that will allow you to wrap your favorite libraries and reuse them in Ember.\n","tags":["technology","ember","tutorial","javascript"],"date":"2016-02-15T16:50:36Z"}},"_nextI18Next":{"initialI18nStore":{"en":{"common":{"common":{"name":"Igor Kuzmenko","version":"version","articleFooter":"If you enjoyed the reading, you can tip me \u003ca href=\"https://fundof.me/kuzzmi?tip\" target=\"_blank\" rel=\"noreferrer\"\u003ehere\u003c/a\u003e üòâ","articleNotAvailable":"This content is available only in Ukrainian."},"menu":{"home":"Home","blog":"Tech articles","thoughts":"Thoughts","podcast":"Podcast","projects":"Projects","about":"About me"},"home":{"meta":{"description":"Home page of Igor Kuzmenko"},"bio":"developer and tech entrepreneur","read":"Read","recents":"Recent publications","description":{"part_1":"Here I publish ","part_2":"my thoughts","part_3":" and ","part_4":" tech articles","part_5":". Avid Linux and vim user. Co-founder at "}},"blog":{"description":"Different findings in the tech world that I want to share with world."},"thoughts":{"description":"My thoughts about life and work in Ukrainian."},"about":{"body":"Hi üëã\u003cbr /\u003e\u003cbr /\u003eMy name is Igor Kuzmenko. I love my wife, son, dog and cat. And I love making things up and making them real (but more often this doesn't happen).\u003cbr /\u003e\u003cbr /\u003eFor a long time, my personal page seemed like an official paper with a bunch of clich√©s, so I got sick of it and turned it into something what feels more like me and my approach to life: a combination of lightness, aesthetics, some seriousness and humor (and modesty).\u003cbr /\u003e\u003cbr /\u003eI spend my spare time with my family, doing pet projects, playing video games and more: from playing the ukulele and drawing, to electrical engineering and sports car driving.\u003cbr /\u003e\u003cbr /\u003eI've tried countless times to increase my online presence, but it never lasts long üôÉ\u003cbr /\u003e\u003cbr /\u003eMy social networks and contacts are available here: \u003ca href=\"https://fundof.me/igor\"\u003efundof.me/igor\u003c/a\u003e"}}}},"initialLocale":"en","userConfig":{"i18n":{"defaultLocale":"en","locales":["en","ua"]},"default":{"i18n":{"defaultLocale":"en","locales":["en","ua"]}}}}},"__N_SSG":true},"page":"/[locale]/blog/[slug]","query":{"locale":"en","slug":"creating-ember-cli-addon-with-external-library-part-1"},"buildId":"ni9QrGw6Qmb3NE0ha6JGE","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>