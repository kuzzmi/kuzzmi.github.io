{"pageProps":{"post":{"html":"<p>I just found an issue that I had hard times solving until I saw a\ncomment somewhere on the Internet (can't find it, sorry).</p>\n<p>In a nutshell, after wrapping the first child of <code>ConnectedRouter</code> with <code>connect</code>, weird stuff started happening with my routes.</p>\n<p>Consider having this situation:</p>\n<pre><code class=\"hljs\"><span class=\"hljs-comment\">// index.js</span>\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">React</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;react&#x27;</span>\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">ReactDOM</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;react-dom&#x27;</span>\n<span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">Provider</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;react-redux&#x27;</span>\n<span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">ConnectedRouter</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;react-router-redux&#x27;</span>\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">AppContainer</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;./containers/app&#x27;</span>\n<span class=\"hljs-keyword\">import</span> { history, store } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;./store&#x27;</span>\n\n<span class=\"hljs-title class_\">ReactDOM</span>.<span class=\"hljs-title function_\">render</span>(\n  <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Provider</span> <span class=\"hljs-attr\">store</span>=<span class=\"hljs-string\">{store}</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ConnectedRouter</span> <span class=\"hljs-attr\">history</span>=<span class=\"hljs-string\">{history}</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">AppContainer</span> /&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ConnectedRouter</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Provider</span>&gt;</span></span>,\n  <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&#x27;root&#x27;</span>)\n)\n</code></pre>\n<pre><code class=\"hljs\"><span class=\"hljs-comment\">// WRONG</span>\n<span class=\"hljs-comment\">// containers/app.js</span>\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">React</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;react&#x27;</span>\n<span class=\"hljs-keyword\">import</span> { connect } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;react-redux&#x27;</span>;\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">AppContainer</span> = (<span class=\"hljs-params\">{ foo }</span>) =&gt; (\n  <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>{ foo }<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>\n)\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-title function_\">connect</span>(<span class=\"hljs-function\">() =&gt;</span> ({ <span class=\"hljs-attr\">foo</span>: <span class=\"hljs-string\">&#x27;bar&#x27;</span> }))(<span class=\"hljs-title class_\">AppContainer</span>);\n</code></pre>\n<p>What you need to do in this case is to wrap your \"connected\" component with <code>withRouter</code> provided by <code>react-router</code>:</p>\n<pre><code class=\"hljs\"><span class=\"hljs-comment\">// RIGHT</span>\n<span class=\"hljs-comment\">// containers/app.js</span>\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">React</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;react&#x27;</span>\n<span class=\"hljs-keyword\">import</span> { withRouter } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;react-router-dom&#x27;</span>\n<span class=\"hljs-keyword\">import</span> { connect } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;react-redux&#x27;</span>\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">AppContainer</span> = (<span class=\"hljs-params\">{ foo }</span>) =&gt; (\n  <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>{ foo }<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>\n)\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-title function_\">withRouter</span>(\n  <span class=\"hljs-title function_\">connect</span>(<span class=\"hljs-function\">() =&gt;</span> ({ <span class=\"hljs-attr\">foo</span>: <span class=\"hljs-string\">&#x27;bar&#x27;</span> }))(<span class=\"hljs-title class_\">AppContainer</span>)\n)\n</code></pre>\n<p>Here you go.</p>\n<p>I hope this helps!</p>","type":"blog","meta":{"slug":"connected-react-router-redux","title":"React Router + Connected Component","layout":"post","lang":"en","description":"A tip on how to fix issue when using connected React Router v4 and Redux in React\n","tags":["technology","react","redux","javascript"],"date":"2019-02-19T05:00:00Z"}},"_nextI18Next":{"initialI18nStore":{"en":{"common":{"common":{"name":"Igor Kuzmenko","version":"version","articleFooter":"If you enjoyed the reading, you can tip me <a href=\"https://fundof.me/kuzzmi?tip\" target=\"_blank\" rel=\"noreferrer\">here</a> ðŸ˜‰","articleNotAvailable":"This content is available only in Ukrainian."},"menu":{"home":"Home","blog":"Tech articles","thoughts":"Thoughts","podcast":"Podcast","projects":"Projects","about":"About me"},"home":{"meta":{"description":"Home page of Igor Kuzmenko"},"bio":"developer and tech entrepreneur","read":"Read","recents":"Recent publications","description":{"part_1":"Here I publish ","part_2":"my thoughts","part_3":" and ","part_4":" tech articles","part_5":". Avid Linux and vim user. Co-founder at "}},"blog":{"description":"Different findings in the tech world that I want to share with world."},"thoughts":{"description":"My thoughts about life and work in Ukrainian."},"about":{"body":"Hi ðŸ‘‹<br /><br />My name is Igor Kuzmenko. I love my wife, son, dog and cat. And I love making things up and making them real (but more often this doesn't happen).<br /><br />For a long time, my personal page seemed like an official paper with a bunch of clichÃ©s, so I got sick of it and turned it into something what feels more like me and my approach to life: a combination of lightness, aesthetics, some seriousness and humor (and modesty).<br /><br />I spend my spare time with my family, doing pet projects, playing video games and more: from playing the ukulele and drawing, to electrical engineering and sports car driving.<br /><br />I've tried countless times to increase my online presence, but it never lasts long ðŸ™ƒ<br /><br />My social networks and contacts are available here: <a href=\"https://fundof.me/igor\">fundof.me/igor</a>"}}}},"initialLocale":"en","userConfig":{"i18n":{"defaultLocale":"en","locales":["en","ua"]},"default":{"i18n":{"defaultLocale":"en","locales":["en","ua"]}}}}},"__N_SSG":true}